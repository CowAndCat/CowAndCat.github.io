---
layout: post
title:  DSP & ADX
category: RTB
comments: false
---
# 1.DSP

## 1.1 基本概念
DSP(Demand-Side Platform)需求方平台是为广告主、代理公司提供的一个综合性管理平台，通过同一个界面管理多个数字广告和数据交换的账户。即广告交易平台对应的以RTB方式购买广告的采买方.

产品的核心特征有两个：一个是支持RTB方式的流量购买，另一个是需要支持定制化的用户划分。

利用DSP，广告主可以在广告交易平台(Ad Exchange)对在线广告进行实时竞价(RTB Real-Time Bidding)，高效管理广告定价。利用DSP也可以根据目标受众数据分析进行理性定价，在用户优化的基础上使用DSP设置如CPC和CPA这些关键性能指标，从而达到理性定价的目标。

DSP的使用者：广告主（想打广告的那一方）  
DSP的输出和输入来源： ADX

相对应的SSP，使用者：媒体（提供广告展示的一方）  

媒体至少有四中常用的广告变现选择：担保式投送的合约售卖方式、自营广告网络、托管给其他广告网络、通过RTB变现。

----------
搜索引擎广告是头一回开始可以通过用户行为，将广告投入到有需求的个体面前，这样的广告就算没成交也绝不能说是浪费。但相比DSP的投放算法，搜索引擎的精准就显得浅薄了许多。

DSP使得在线广告的受众定向精准程度达到了前所未有的水平。

比较这两种广告模式，搜索引擎广告胜在庞大的数据量，DSP胜在挖掘技术。虽然目前市场属于搜索引擎，但未来是DSP无疑。因为营销是必须要追求效果的，大家做的是生意而非慈善，无效果的大规模影响力说的浅显易懂便是“对牛弹琴”。

## 1.2 DSP 具备的能力
DSP具备点击率预测、点击价值估计、流量预测、站外推荐等多方面的运算能力.

## 1.3 定制化的用户划分
广告主相关的定向方式。

第一个例子，假设某电商网站准备进行一次面向其老客户的广告投放，这里的“老客户”就是一种定制化用户划分，显然只有该电商自己才能找到这个用户群，而任何媒体或广告网络，无论数据能力有多强，也无法加工出这样的标签。

第二个例子，某银行希望通过广告接触到自己信用卡的潜在客户。要找到这些潜在客户，我们需要以银行现有的客户作基础，分析其行为和人口属性有哪些特征，然后再根据这些特征去拓展可能的潜在客户。这一过程既需要需求方的数据，又需要媒体数据，而其加工出的人群仍然是与广告主相关的，因此也属于定制化用户划分。

## 1.4 广告投放的决策流程
DSP服务器通过RTBS接口拿到广告请求，然后经过与广告网络类似的决策步骤，包括检索和eCPM排序，找到价值最高的广告，并将报价返回给Ad Exchange。

与广告网络相比，DSP的广告决策过程有一些难点：  
一是在eCPM估计时，除了估计CTR，还要估计点击价值，并且由于出价的要求，这一估计要尽可能准确；  
二是由于DSP是完全面向广告主的产品，广告主量的需求也需要满足，因此还要考虑在线
分配的策略。

上面讨论的这个决策流程，适用于以套利为目标的DSP，即通过优化算法提升广告主的ROI来赚取更多的利润。也有的DSP产品更接近于透明采买的方式，即广告主按照自己的用户划分和策略完成RTB购买，而DSP收取固定的手续费，这种情况下，对优化的需求就没有那么高。

## 1.5 DSP技术公司
在国外，拥有DSP技术的公司分别是 MdotM，Criteo，Vizury 和SocioMatic。在国内，随着互联网广告行业的发展和成熟，也有一批拥有自己自主研发DSP平台的优秀广告公司。三头狼DSP，Avazu艾维邑动，Mediav，Codrim和Taobao Tanx等。

从曝光率排名来看， Criteo每个月可以达到200多亿的展示曝光率、Vizury每个月30亿的展示曝光率、Avazu每个月在超过40个国家能达到300亿的展示曝光率、Codrim月展示曝光次数增长高达150%。

## 1.6 DSP给网络广告市场带来的变化
**对广告主来说：**

##### 1、 RTB让广告购买变得透明、有效
虽然目前市场上大多数的媒体购买方式并非通过RTB形式，但这股实时竞价的浪潮却给现有的模式带来了强大的冲击。RTB模式将使广告购买变得透明、有效，广告主可以更清晰全面的进行预算优化，提升ROI。

##### 2、 一个平台简化了媒体购买的流程

广告主不必再花费很多的人力和时间来进行媒体购买的沟通，而将精力更多的转移到优化预算配置，提升广告效果上来。

##### 3、 全面掌控广告投放状况

DSP的出现为广告主通观广告投放全局提供了可能。

##### 4、 真正实现受众购买

DSP整合了包括Ad Exchange、媒体、Ad Network中的海量流量，更重要的是，这些海量流量的背后对应的都是真实的目标受众，这让按受众购买成为现实。

**对代理公司来说：**

代理公司的职责是服务广告主，DSP给广告主带来的改变同样适用于代理公司，但考虑到代理公司多客户、跨领域等特点，很多DSP平台会专门针对代理公司研发更多有针对性的功能，比如：

##### 1、 通过在线系统对广告投放进行自动化管理

有一个自动化的操作平台能够简化代理公司工作流程，直接进行RTB广告资源的购买。让代理公司的媒介人员将精力集中到活动策略上而非操作执行上。

##### 2、 购买Exchange的流量资源

能够直接购买Exchange中的流量资源，节省CPM成本，并且能够在全网范围内控制人群到达频次，能够针对活动效果进行系统自动优化，帮广告主提升在线营销效率，提高广告主的满意度。

##### 3、 账户管理

作为DSP平台的基础功能，会为代理公司定制账户管理功能，允许他们在同一个平台管理多个或所有广告客户，简化人员操作成本，提升效率。

##### 4、 全面的数据报告

与账户管理同步，DSP可以显示代理公司所有广告花费的数据报表，有助于对比不同行业、不同广告主之间的投放差异，从而优化广告策略，提升广告效果。

**对媒体来说：**

##### 1、 广告主的预算将更多的向媒体倾斜

DSP简化了媒体购买的中间流程，使广告主在媒体上的广告预算比例增加，而不会被越来越多的中间服务商抽成。

##### 2、 提升流量的价值，使得小媒体能够与大媒体并存

DSP让媒体的剩余流量提升变现能力，小媒体也能从DSP中挖掘更多的广告价值，得到与大媒体并存抗衡的砝码。

##### 3、 简化媒体出售流程

对应广告主来讲，媒体的广告售卖方式也变得简单起来，只需要对接一家Ad Exchange即可，这得益于RTB让媒体购买变得透明、有效。

# 2. ADX

一个开放的、能够将媒体主和广告商联系在一起的在线广告市场(类似于股票交易所)。交易平台里的广告存货并不一定都是溢价库存，只要媒体主想要提供的，都可以在里面找到。

## 2.1 Ad Exchange的骨干架构
当用户访问媒体页面，将广告请求发到Ad Exchange后，Ad Exchange向各个DSP发起询价并完成决策，然后将胜出的DSP返回给媒体页面进行广告投放。

从核心概念上看，Ad Exchange既不需要自己的广告索引，也不需要eCPM估计，因而可以用非常简单清晰的架构实现。

但是这仅仅是概念，实际产品中，为了支持广告主在不需要定制化用户划分时更方便的图形界面采买，也需要广告索引；而为了实现询价优化(后文有具体介绍)，一定的的eCPM估计也是不可少的。

## 2.2 ADX的相关技术和算法

### 1. 实时竞价
实时竞价的的整个接口可以分成两部分：

- 线下进行的将供给方与需求方用户ID对应起来的cookie mapping（身份对应）过程
- 线上广告请求到来时的竞价和投放过程 

### 2. 过程

#### 2.2.1 身份对应 （Cookie Mapping)
1. 从广告主网站向DSP服务器发起cookie mapping请求。DSP负责加工广告主定制受众标签
2. DSP与Ad Exchange服务器之间通信完成cookie mapping

cookie mapping 要解决跨域名的问题。

#### 2.2.2 广告请求（Ad Call）
1. 当用户接触到媒体网站的广告位时，前端向Ad Exchange发起广告请求；
2. Ad Exchange向各DSP传送URL和本域名cookie，发起询价请求。
    DSP根据预先做好的cookie mapping查出对应的已方cookie，决策是否参与竞价，如果参与，则返回自己的出价。在等待一个固定的时间片后，Ad Exchange选出出价最高的DSP返回给媒体网站；
3. 媒体网站从胜出的DSP拿到广告创意并展示。

其中2,3两步可以合并为一步，即DSP同时返回出价和广告创意地址，由Ad Exchange 返回给媒体。这样做的好处是减少了一次服务器往返，用户看到的广告延迟也会减少，缺点是Ad Exchange 可以获得DSP 某个广告商的相关受众，因而存在信息泄露风险，不太符合Ad Exchange 中立市场的地位。实际产品中，这两种方式都有采用。