---
layout: post
title: 设计模式之观察者模式
category: design_pattern
comments: false
---
###1、 介绍
**观察者模式**，有时又被称为发布-订阅Subscribe模式、模型-视图模式、源-收听者模式或从属者模式。

在此种模式中，一个目标物件管理所有相依于它的观察者物件，并且在它本身的状态改变时主动发出通知。这通常透过呼叫各观察者所提供的方法来实现。  
此种模式通常被用来实现事件处理系统。

###2、 优势
- 观察者模式（Observer）完美的将观察者和被观察的对象分离开。

- 观察者模式在模块之间划定了清晰的界限，提高了应用程序的可维护性和重用性。

举个例子，用户界面可以作为一个观察者，业务数据是被观察者，用户界面观察业务数据的变化，发现数据变化后，就显示在界面上。

###3、 注意事项
实现观察者模式的时候要注意，观察者和被观察对象之间的互动关系**不能**体现成类之间的**直接调用**，否则就将使观察者和被观察对象之间紧密的耦合起来，从根本上违反面向对象的设计的原则。无论是观察者“观察”观察对象，还是被观察者将自己的改变“通知”观察者，都不应该直接调用。

### 过程
实现观察者模式有很多形式，比较直观的一种是使用一种“注册——通知——撤销注册”的形式。下面的三个图详细的描述了这样一种过程：  
![观察者模式](/images/201508/observer.jpg "观察者模式")

- 观察者

	（Observer）将自己注册到被观察对象（Subject）中，被观察对象将观察者存放在一个容器（Container）里。

- 被观察

	被观察对象发生了某种变化（如图中的SomeChange），从容器中得到所有注册过的观察者，将变化通知观察者。
- 撤销观察

	观察者告诉被观察者要撤销观察，被观察者从容器中将观察者去除。  
	观察者将自己注册到被观察者的容器中时，被观察者不应该过问观察者的具体类型，而是应该使用观察者的接口。这样的优点是：假定程序中还有别的观察者，那么只要这个观察者也是相同的接口实现即可。  
	一个被观察者可以对应多个观察者，当被观察者发生变化的时候，他可以将消息一一通知给所有的观察者。基于接口，而不是具体的实现——这一点为程序提供了更大的灵活性。

摘自 [百度百科 观察者模式](http://baike.baidu.com/view/1854779.htm)
